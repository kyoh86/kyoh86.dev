<!DOCTYPE html>
<html lang="ja-jp">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
 <title>Posts </title>



<meta name="description" content="Works of kyoh86">


<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<meta name="theme-color" content="#4d4d4d">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">
<link rel="stylesheet" href="https://kyoh86.work/css/font-awesome.min.css" type='text/css' media='all'>

<link href="https://kyoh86.work/css/style.css" rel="stylesheet" type='text/css' media='all'>

<link href="https://kyoh86.work/css/custom.css" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://kyoh86.work/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://kyoh86.work/img/favicon.ico" type="image/x-icon">

<link href="https://kyoh86.work/posts/index.xml" rel="alternate" type="application/rss+xml" title="kyoh86.work" />
<link href="https://kyoh86.work/posts/index.xml" rel="feed" type="application/rss+xml" title="kyoh86.work" />


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-70974996-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>

  <body class="home blog standard">
    <div class="overflow-container">
      <a class="skip-content" href="#main">Skip to content</a>
      <header id="site-header" class="site-header" role="banner">
        <div class='top-navigation'>
          <div class="container">

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation" aria-label="menu"><i class="fa fa-plus"></i></button>
    <div class="menu">
      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li id="menu-item" class="menu-item">
          <a href="/categories/tech">tech</a>
        </li>
        
      </ul>
    </div>
  </div>

    <ul class="social-media-icons">
    
      <li>
        <a class="facebook" target="_blank"
           href="https://www.facebook.com/kyoh.86" >
          <i class="fa fa-facebook" title="facebook"></i>
          <span class="screen-reader-text">facebook</span>
        </a>
      </li>
    

    
      <li>
        <a class="googleplus" target="_blank"
           href="https://plus.google.com/u/0/100199074642864423892" >
          <i class="fa fa-google-plus" title="googleplus"></i>
          <span class="screen-reader-text">googleplus</span>
        </a>
      </li>
    


    
      <li>
      <a href="https://twitter.com/kyoh86"  class="twitter" target="_blank">
          <i class="fa fa-twitter-square" title="twitter"></i>
          <span class="screen-reader-text">twitter</span>
      </a>
      </li>
    

    
      <li>
      <a href="https://www.instagram.com/kyoh86"  class="twitter" target="_blank">
          <i class="fa fa-instagram" title="instagram"></i>
          <span class="screen-reader-text">instagram</span>
      </a>
      </li>
    

    

    
      <li>
      <a href="https://www.linkedin.com/in/kyoh86/" class="linkedin" target="_blank">
          <i class="fa fa-linkedin" title="linkedin"></i>
          <span class="screen-reader-text">linkedin</span>
      </a>
      </li>
    

    
      <li>
      <a href="https://stackoverflow.com/users/3610769/kyoh86"  class="stackoverflow" target="_blank">
          <i class="fa fa-stack-overflow" title="stackoverflow"></i>
          <span class="screen-reader-text">stackoverflow</span>
      </a>
      </li>
    


    
      <li>
      <a href="https://github.com/kyoh86"  class="github" target="_blank">
          <i class="fa fa-github" title="github"></i>
          <span class="screen-reader-text">github</span>
      </a>
      </li>
    
  </ul>


</div>

        </div>

        <div class="container">
          <div id="title-info" class="title-info">
  <div class="site-title">
    
    <a href="/"> kyoh86.work </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation" aria-label="menu">
    <i class="fa fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Works of kyoh86</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li id="menu-item" class="menu-item">
          <a href="https://kyoh86.work/">Home</a>
        </li>
        
        <li id="menu-item" class="menu-item">
          <a href="https://kyoh86.work/about">About</a>
        </li>
        
        <li id="menu-item" class="menu-item">
          <a href="https://kyoh86.work/products/">Products</a>
        </li>
        
      </ul>
    </div>

  </div>

        </div>
      </header>

      <div id="main" class="main" role="main">
        <div class="archive-header">
          <h1>Posts</h1>
        </div>
        <div class="loop-container">
  
    <div class="post zoom full-without-featured excerpt odd">
      
      <div class="excerpt-container">
        <div class="excerpt-meta">
          <span class="date">December 24</span>
          
            <span> / </span>
            <span class="category">
              <a href="/categories/tech">tech</a>
            </span>
          
        </div>
        <div class='excerpt-header'>
          <h2 class='excerpt-title'>
            <a href="https://kyoh86.work/posts/2015-12-24_10-53-07/ ">go で AggregationException(.NET)的なことをする</a>
          </h2>
        </div>
        <div class='excerpt-content'>
          <article>
            おはようございます。皆さん、せい・・聖夜は如何お過ごしの予定でしょうか。
さてさて、Goのエラー処理についてはやいやい言われていますね。 エラートラップ忘れだの、エラーをどういうふうに伝播するべきか、といった記事がたくさんあります。侃々諤々といった感じで良いですね。
でも、意外と「ループの中で、エラーが発生しても無視して次に進めるが、発生したエラーを最後にまとめて回収する」みたいな話がなかったので、書いてみようと思います。 無いのは需要が無い（または自明過ぎて誰も書かない）からだ！と言われないうちに書ききってしまいましょう。
https://github.com/kyoh86/qiita
package util import ( &quot;encoding/json&quot; &quot;errors&quot; &quot;fmt&quot; ) // Errors : 複数のエラーを一括するエラー type Errors []error // Push : エラーを追加する func (a *Errors) Push(item error) { if item == nil { return } if arr, ok := item.(Errors); ok &amp;&amp; arr != nil { for _, child := range arr { a.Push(child) } } else { *a = append(*a, item) } } // IsEmpty : エラーが空かどうか取得する func (a *Errors) IsEmpty() bool { return a == nil || len(*a) == 0 } // Error : エラー出力を得る func (a Errors) Error() string { array := make([]string, len(a)) for i, item := range a { array[i] = item.
            <div class="more-link-wrapper"><a class="more-link" href="https://kyoh86.work/posts/2015-12-24_10-53-07/">Read the post<span class="screen-reader-text">This is a Standard Post</span></a></div>
          </article>
        </div>
      </div>
    </div>
  
    <div class="post zoom full-without-featured excerpt even">
      
      <div class="excerpt-container">
        <div class="excerpt-meta">
          <span class="date">December 18</span>
          
            <span> / </span>
            <span class="category">
              <a href="/categories/tech">tech</a>
            </span>
          
        </div>
        <div class='excerpt-header'>
          <h2 class='excerpt-title'>
            <a href="https://kyoh86.work/posts/2015-12-18_17-55-22/ ">gopkg.in絡みで困ることになる・・・のかもしれない？？</a>
          </h2>
        </div>
        <div class='excerpt-content'>
          <article>
            gopkg.in便利ね gopkg.in便利なんですが、何かのトラブルの種になっている気配があるので起稿。
詳細については未調査につき、何らかの他の要因によるかもしれません
事象1: version違いのimport package A import &quot;gopkg.in/foo/bar.v2&quot;  package B import &quot;gopkg.in/foo/bar.v1&quot;  みたいなことが起きる。
 最初は&quot;gopkg.in/foo/bar.v1&quot;で開発していた 開発メンバーはあまり意識せずgo get ./...で関連パッケージ&quot;gopkg.in/foo/bar.v1&quot;を手に入れている。 途中で&quot;gopkg.in/foo/bar.v2&quot;を使うように更新した。 誰かが、A/alpha.go をコピーして、B/bravo.goを作ろう！と考える。 B/bravo.goを保存したタイミングで、goimportが走ってimport先が自動で&quot;gopkg.in/foo/bar.v1&quot;になってしまう。  事象2: CIが怒り出す。 「&rdquo;github.com/hoge/piyo.xXXXX&rdquo;なんて無いんですけど！」と怒られる。 一見、事象1のパッケージとは関係なさそうなところで起きる。 $GOPATH/src/github.com/hoge/piyo を見に行くけど、問題なさそう。 go get ./... とすると、やっぱり「&rdquo;github.com/hoge/piyo.xXXXX&rdquo;なんて無いんですけど！」と怒られる。
先述の事象1の状態を解消（B/bravo.goのimportを&quot;gopkg.in/foo/bar.v2&quot;に更新）したら、直った。
原因は調査中。 原因の根幹は未解明。
gopkgのバージョン番号がv1,v2という風に昇順な上に、goimportが若い番号のものを自動で割り当ててしまうことに原因がある・・・のかも。 同名のpackageが、違うURLで存在する場合に何らかの問題が起きる？？？
とりあえず一旦記事に起こしておく。
            <div class="more-link-wrapper"><a class="more-link" href="https://kyoh86.work/posts/2015-12-18_17-55-22/">Read the post<span class="screen-reader-text">This is a Standard Post</span></a></div>
          </article>
        </div>
      </div>
    </div>
  
    <div class="post zoom full-without-featured excerpt odd">
      
      <div class="excerpt-container">
        <div class="excerpt-meta">
          <span class="date">December 17</span>
          
            <span> / </span>
            <span class="category">
              <a href="/categories/tech">tech</a>
            </span>
          
        </div>
        <div class='excerpt-header'>
          <h2 class='excerpt-title'>
            <a href="https://kyoh86.work/posts/2015-12-17_00-03-03/ ">GitHubのPullRequest一覧イマイチ使いづらくね？→捗るツール作ったった</a>
          </h2>
        </div>
        <div class='excerpt-content'>
          <article>
            tl;dr Require status checks to pass before merging to master デプロイはjenkinsおじさんをひっぱたくだけのかんたんなお仕事 デプロイするときに、_このデプロイで何が変わるのか_を把握しておきたい masterブランチのpull-requestの履歴見りゃいいじゃん Yuck!  GitHub をCLIでいい感じにするツールを作ろう! Its&rsquo; GOGH $ go get github.com/kyoh86/gogh $ gogh pull-request list --owner github --repos hub --sort closed --direction desc #1044	commands/fork: handle missing &amp;#34;origin&amp;#34; remote	master	12-04 05:09	12-08 18:26	12-08 18:26 #1038	Alter fork behavior to rename &amp;#34;origin&amp;#34; to &amp;#34;upstream&amp;#34;.	master	11-28 07:03	-	11-30 21:36 #961	client.Releases() fetches all pages.	master	07-18 09:07	-	11-26 10:46 #1031	Update redirects in Readme	master	11-15 01:04	-	11-16 20:06 #1024	Cache result of `git rev-parse --git-dir`	master	11-01 02:09	11-04 19:19	11-04 19:19  え？整形したい？columnにpipeしましょ。
            <div class="more-link-wrapper"><a class="more-link" href="https://kyoh86.work/posts/2015-12-17_00-03-03/">Read the post<span class="screen-reader-text">This is a Standard Post</span></a></div>
          </article>
        </div>
      </div>
    </div>
  
    <div class="post zoom full-without-featured excerpt even">
      
      <div class="excerpt-container">
        <div class="excerpt-meta">
          <span class="date">December 07</span>
          
            <span> / </span>
            <span class="category">
              <a href="/categories/tech">tech</a>
            </span>
          
        </div>
        <div class='excerpt-header'>
          <h2 class='excerpt-title'>
            <a href="https://kyoh86.work/posts/2015-12-07_02-30-43/ ">簡易リバースプロキシ「ichigo」でWebアプリ開発が捗る話</a>
          </h2>
        </div>
        <div class='excerpt-content'>
          <article>
            概要 自社サービスの開発中、必要にかられてGOで簡単なリバースプロキシツールを作った話を書いてみます。
前提 自社サービスの開発を、次のような構成で進めています。
 フロントエンドとバックエンド（APIなど）をパスで振り分け  /の下はフロントエンド /api/の下はAPI その他にも色々・・・  フロントエンドとバックエンドは、担当者もリポジトリも、動いているサーバも別 それぞれサーバが開発環境、本番環境とテスト環境、のように複数の環境をもっている  やりたいこと 前提の環境をもって、いざ開発をしようとローカル環境を構築するとなれば、
 ローカルにnginxでリバースプロキシを立てて管理するのは面倒くさい ちょっとした環境の変更があると共有がいちいち面倒くさい フロントエンド担当者がわざわざバックエンドをcloneだのpullだの面倒くさい 環境間でテストするためにわざわざnginxの設定書き換えるのも面倒くさい  と、面倒くさいことばかりになりがちです。
そこで、簡単なプロキシツールを作って、
 ローカルには自分の担当するサーバ（とプロキシツール）だけが動いていればいい 接続先の環境を容易に切り替えられる  ようになったら便利だなァ、というのが動機です。
作ってみた これを手軽に実現できるよう、簡単なリバースプロキシツールを作ってみました。
Ichigo (GitHub) いちごです。美味しいですよね、いちご。
使い方 詳しい使い方は、GitHubのREADMEを御覧ください。 ここではかんたんな機能紹介まで。
 Ichigo経由でアクセスすると、画面左下にコントローラーが現れます。  各サーバーのプロキシ先を、コントローラで切り替えられます。   愚痴 開発中のあれこれ  この程度のツールを作るなら、Goってホント良い感じ。  Goっていい感じ。  世の中にありそうなもんだけどなァ、と思ったらなかなかなかった。  もっと賢いやり方あったら教えてほしい  TypeScriptで頑張ってみたけど、やっぱりフロントエンド苦手。  でもやっぱりTypeScript最高。型付き言語最高。愛してる。（異論は認めます）  Goっていい感じ。 gorilla/muxとか、mux系は色々なライブラリがあるのに、もそっと柔らかいライブラリはないものなのか・・・。  /*はこっち、/api/*はあっち、とかやろうとすると、全部/*に吸い取られる罠 net/http/httputil.ReverseProxy最高！  Goっていい感じ。  Goっていい感じ。 Gopher君ぺろぺろしたい   Thanks ちょっとした面倒を避けて、みんなの苺が美味しくなりますように
            <div class="more-link-wrapper"><a class="more-link" href="https://kyoh86.work/posts/2015-12-07_02-30-43/">Read the post<span class="screen-reader-text">This is a Standard Post</span></a></div>
          </article>
        </div>
      </div>
    </div>
  
</div>

      </div>

      <footer id="site-footer" class="site-footer" role="contentinfo">
  <h1>
    
      <a href=""> kyoh86.work </a>
    
  </h1>

  
    <p class="site-description">Works of kyoh86</p>
  

  <div class="menu-footer" role="navigation">
    <div class="menu">
      <ul class="menu-footer-items">
        
      </ul>
    </div>
  </div>

    <ul class="social-media-icons">
    
      <li>
        <a class="facebook" target="_blank"
           href="https://www.facebook.com/kyoh.86" >
          <i class="fa fa-facebook" title="facebook"></i>
          <span class="screen-reader-text">facebook</span>
        </a>
      </li>
    

    
      <li>
        <a class="googleplus" target="_blank"
           href="https://plus.google.com/u/0/100199074642864423892" >
          <i class="fa fa-google-plus" title="googleplus"></i>
          <span class="screen-reader-text">googleplus</span>
        </a>
      </li>
    


    
      <li>
      <a href="https://twitter.com/kyoh86"  class="twitter" target="_blank">
          <i class="fa fa-twitter-square" title="twitter"></i>
          <span class="screen-reader-text">twitter</span>
      </a>
      </li>
    

    
      <li>
      <a href="https://www.instagram.com/kyoh86"  class="twitter" target="_blank">
          <i class="fa fa-instagram" title="instagram"></i>
          <span class="screen-reader-text">instagram</span>
      </a>
      </li>
    

    

    
      <li>
      <a href="https://www.linkedin.com/in/kyoh86/" class="linkedin" target="_blank">
          <i class="fa fa-linkedin" title="linkedin"></i>
          <span class="screen-reader-text">linkedin</span>
      </a>
      </li>
    

    
      <li>
      <a href="https://stackoverflow.com/users/3610769/kyoh86"  class="stackoverflow" target="_blank">
          <i class="fa fa-stack-overflow" title="stackoverflow"></i>
          <span class="screen-reader-text">stackoverflow</span>
      </a>
      </li>
    


    
      <li>
      <a href="https://github.com/kyoh86"  class="github" target="_blank">
          <i class="fa fa-github" title="github"></i>
          <span class="screen-reader-text">github</span>
      </a>
      </li>
    
  </ul>


  <div class="design-credit">
    
      <p>&copy; 2018 kyoh86</p>
    
  </div>
</footer>

    </div>
    <script src="https://kyoh86.work/js/jquery.min.js"></script>
<script src="https://kyoh86.work/js/jquerymigrate.js"></script>
<script src="https://kyoh86.work/js/production.min.js"></script>

  </body>
